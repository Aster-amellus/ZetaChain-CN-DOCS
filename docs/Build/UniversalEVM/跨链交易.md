| **标题** | **描述**                                                     |
| :------: | ------------------------------------------------------------ |
| 跨链交易 | 了解更多关于 **转入交易** 和 **转出交易** 的分类、结构与追踪。 |

## 跨链交易 

跨链交易可以分为两大主要类型：转入交易和转出交易。

转入交易 (连接链 →  ZetaChain)  

转入交易（连接链 → ZetaChain） 是在一个连接链上发起，并在 ZetaChain 上结算（执行）一笔交易。一笔转入交易由两笔交易组成：

- 入站: 交易在连接链上发起并被观测到。
- 出站:对应的交易被广播并在 ZetaChain 上执行。

转出交易 (ZetaChain → 连接链)

转出交易**（**ZetaChain → 连接链）是在ZetaChain 上发起，并在一个连接链上结算（执行）一笔交易。一笔转出交易由两笔交易组成：

- 入站: 交易在 ZetaChain 上发起并被观测到。
- 出站: 对应的交易被广播并在连接链上执行。

追踪一笔跨链交易需要使用转入交易哈希查询ZetaChain 的 Cosmos SDK （Cosmos 开发框架）HTTP API（应用编程接口），以获取 跨链交易哈希。如果一笔跨链交易触发了另一笔 跨链交易（例如，一笔转入交易触发了一笔转出交易），则第一笔跨链交易的哈希可以用作转入交易哈希来获取第二笔跨链交易的哈希。

## 转入与转出示例

一个示例：用户从 Ethereum  测试网（一个连接链）向 ZetaChain 上的一个通用应用合约发起调用，该调用随后触发了从 ZetaChain  到 Polygon 测试网 的一次转出调用。

在这个示例中，用户调用 EVM 网关 的 `depositAndCall`  函数，来调用 ZetaChain 上的一个通用兑换合约。该合约将转入的代币兑换为目标 ZRC-20 代币，并调用 ZetaChain 网关的 `withdraw`  函数，这最终触发了Polygon 测试网上的代币提取（转账）操作。

这个示例涉及两笔 跨链交易s：

1. Ethereum 测试网  →  ZetaChain 测试网 
2. ZetaChain 测试网  →  Polygon 测试网

**步骤追踪：**

- Ethereum 测试网 上的入站交易交易：

  https://sepolia.etherscan.io/tx/0x8e925fa63c69bd27a3aa8e30f4c0f1e67e5fd3fedb23339b387b51b1543e55af

- 使用转入交易交易哈希获取跨链交易1 哈希：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0x8e925fa63c69bd27a3aa8e30f4c0f1e67e5fd3fedb23339b387b51b1543e55af

- 使用 跨链交易 1 哈希 (0x542b...11da) 作为入站交易哈希，获取 跨链交易 2 哈希：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0x542b6bd80004f4013b725c2170b9ed01731b8af9dc61bfb5c0534dc2f0d511da

- Polygon测试网上的出站哈希：

  https://amoy.polygonscan.com/tx/0x49f67ece0c0b59d58312df91342d46b14496abf2d8a52a1a5ce9f4c6136e8d75

## 单一转入示例

一个示例：用户从 Ethereum 测试网 向 ZetaChain 上的一个通用应用合约发起调用。

在这个示例中，用户调用 EVM 网关的 `depositAndCall`  函数，来调用 ZetaChain 上的一个通用兑换合约。该合约将转入的代币兑换为目标 ZRC-20 代币，并转账给 ZetaChain 上的接收方。

这个示例只产生一笔跨链交易：Ethereum 测试网  →  ZetaChain 测试网。

**步骤追踪：**

- Ethereum 测试网 上的转入交易交易：

  https://sepolia.etherscan.io/tx/0xfacdad3d12988e1065e32b757d1bbc7e868fb8cbae51c909b3f178027d233f79

- 跨链交易：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0xfacdad3d12988e1065e32b757d1bbc7e868fb8cbae51c909b3f178027d233f79

如果尝试使用跨链交易哈希作为入站交易哈希查询 API，API会返回 HTTP 404 响应，因为这笔跨链交易没有触发另一笔 跨链交易。

## 转入与终止 (Abort) 示例

一个示例：用户从 Ethereum 测试网向ZetaChain 上的一个通用应用合约发起调用，但该调用终止（Abort）。

在这个示例中，用户调用 EVM 网关的 `depositAndCall`  函数，来调用 ZetaChain 上的一个通用兑换合约。该合约将转入的代币兑换为目标 ZRC-20 代币，但提供的代币数量不足以支付提取到 Polygon 测试网的gas 费用，因此交易回退（reverts）。同时，代币数量也不足以支付回退到 Ethereum 测试网 的交易费用，因此交易终止（aborts）。

**步骤追踪：**

- Ethereum 测试网上的转入交易交易：

  https://sepolia.etherscan.io/tx/0x254d687404ff8f1cd481d2b25866e8c0a68c5d7fde08deaa60e61577752e1466

- 跨链交易：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0x254d687404ff8f1cd481d2b25866e8c0a68c5d7fde08deaa60e61577752e1466

## 转入与回退 (Revert) 示例

一个示例：用户从Base 测试网向ZetaChain 上的一个通用应用合约发起调用，但该调用回退（Reverts）。

在这个示例中，用户调用 EVM 网关的 `depositAndCall` 函数，来调用 ZetaChain上的一个通用兑换合约。该合约将转入的代币兑换为目标 ZRC-20 代币，但提供的代币数量不足以支付提取到 Polygon 测试网的gas 费用，因此交易回退。

**步骤追踪：**

- Base 测试网 上的转入交易交易：

  https://sepolia.basescan.org/tx/0x9fcff3ff5ec57b7198543e6a204f08447d6dd8dc54d33100e3e79f6deb8dc407

- 跨链交易：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0x9fcff3ff5ec57b7198543e6a204f08447d6dd8dc54d33100e3e79f6deb8dc407

- 回退到 Base 测试网 的回退交易：

  https://sepolia.basescan.org/tx/0xd86a5babfb7c3297b98d05d145707010aa8f7b690af151729035c3e2d0567eae

## 多重转出示例

一笔单一的交易可以触发多笔跨链交易。

在这个示例中，ZetaChain上的一个单一函数调用执行了对不同连接链的多次网关调用。

**步骤追踪：**

- 跨链交易：

  https://zetachain-athens.blockpi.network/lcd/v1/public/zeta-chain/crosschain/inboundHashToCctxData/0x3d56898690abb98a514b0b05b799c0d61c0e305a5f962504f3b301adf01b1b34